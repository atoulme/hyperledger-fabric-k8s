# https://fabric-sdk-node.github.io/release-1.4/tutorial-network-config.html
name: "Network"
version: "1.0"

tlsEnabled: true
useActualDomains: true

network:
  # used by init script to create genesis block and by peer-org-flow to parse consortiums
  genesisProfile: SampleMultiNodeEtcdRaft
  # used by init script to create genesis block 
  systemChannelID: byfn-sys-channel

  channels:
    oil-orders:
      orderers:
        - orderer.example.com
      peers:
        peer0.clearinghouse.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
        peer0.manufacturer.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
    credit-letters:
      orderers:
        - orderer.example.com
      peers:
        peer0.clearinghouse.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
        peer0.manufacturer.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
    poc-bids:
      orderers:
        - orderer.example.com
      peers:
        peer0.clearinghouse.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
        peer0.manufacturer.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
    supply-info:
      orderers:
        - orderer.example.com
      peers:
        peer0.clearinghouse.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
        peer0.manufacturer.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
    plastic-buys:
      orderers:
        - orderer.example.com
      peers:
        peer0.clearinghouse.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
        peer0.manufacturer.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
    loan-payments:
      orderers:
        - orderer.example.com
      peers:
        peer0.clearinghouse.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true
        peer0.manufacturer.example.com:
          endorsingPeer: true
          chaincodeQuery: true
          ledgerQuery: true
          eventSource: true

  organizations:
    TradeFloor:
      mspid: ClearinghouseMSP
      peers:
        - peer0.clearinghouse.example.com

    Acme:
      mspid: ManufacturerMSP
      peers:
        - peer0.manufacturer.example.com

  orderers:
    orderer.example.com:
      url: grpcs://hlf-orderer--orderer--orderer:7050

      # these are standard properties defined by the gRPC library
      # they will be passed in as-is to gRPC client constructor
      grpcOptions:
        ssl-target-name-override: orderer.example.com

      tlsCACerts:
        path: /artifacts/crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/tls/ca.crt
    orderer2.example.com:
      url: grpcs://hlf-orderer--orderer--orderer2:7050

      # these are standard properties defined by the gRPC library
      # they will be passed in as-is to gRPC client constructor
      grpcOptions:
        ssl-target-name-override: orderer2.example.com

      tlsCACerts:
        path: /artifacts/crypto-config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/ca.crt
    orderer3.example.com:
      url: grpcs://hlf-orderer--orderer--orderer3:7050

      # these are standard properties defined by the gRPC library
      # they will be passed in as-is to gRPC client constructor
      grpcOptions:
        ssl-target-name-override: orderer3.example.com

      tlsCACerts:
        path: /artifacts/crypto-config/ordererOrganizations/example.com/orderers/orderer3.example.com/tls/ca.crt
    orderer4.example.com:
      url: grpcs://hlf-orderer--orderer--orderer4:7050

      # these are standard properties defined by the gRPC library
      # they will be passed in as-is to gRPC client constructor
      grpcOptions:
        ssl-target-name-override: orderer4.example.com

      tlsCACerts:
        path: /artifacts/crypto-config/ordererOrganizations/example.com/orderers/orderer4.example.com/tls/ca.crt
    orderer5.example.com:
      url: grpcs://hlf-orderer--orderer--orderer5:7050

      # these are standard properties defined by the gRPC library
      # they will be passed in as-is to gRPC client constructor
      grpcOptions:
        ssl-target-name-override: orderer5.example.com

      tlsCACerts:
        path: /artifacts/crypto-config/ordererOrganizations/example.com/orderers/orderer5.example.com/tls/ca.crt

  peers:
    peer0.clearinghouse.example.com:
      # this URL is used to send endorsement and query requests
      url: grpcs://hlf-peer--clearinghouse--peer0:7051

      grpcOptions:
        ssl-target-name-override: peer0.clearinghouse.example.com
      tlsCACerts:
        path: /artifacts/crypto-config/peerOrganizations/clearinghouse.example.com/peers/peer0.clearinghouse.example.com/tls/ca.crt

    peer1.clearinghouse.example.com:
      url: grpcs://hlf-peer--clearinghouse--peer1:7051
      grpcOptions:
        ssl-target-name-override: peer1.clearinghouse.example.com
      tlsCACerts:
        path: /artifacts/crypto-config/peerOrganizations/clearinghouse.example.com/peers/peer1.clearinghouse.example.com/tls/ca.crt

    peer0.manufacturer.example.com:
      url: grpcs://hlf-peer--manufacturer--peer0:7051
      grpcOptions:
        ssl-target-name-override: peer0.manufacturer.example.com
      tlsCACerts:
        path: /artifacts/crypto-config/peerOrganizations/manufacturer.example.com/peers/peer0.manufacturer.example.com/tls/ca.crt

    peer1.manufacturer.example.com:
      url: grpcs://hlf-peer--manufacturer--peer1:7051
      grpcOptions:
        ssl-target-name-override: peer1.manufacturer.example.com
      tlsCACerts:
        path: /artifacts/crypto-config/peerOrganizations/manufacturer.example.com/peers/peer1.manufacturer.example.com/tls/ca.crt

  chaincodes:
    - name: contractbid
      # if defined, this will override the global chaincode.version value
      version: "1.0" 
      # chaincode will be installed to all peers in these organizations
      orgs: [Clearinghouse, Manufacturer]
      # at which channels are we instantiating/upgrading chaincode?
      channels:
      - name: oil-orders
        # chaincode will be instantiated/upgraded using the first peer in the first organization
        # chaincode will be invoked on all peers in these organizations
        orgs: [Clearinghouse, Manufacturer]
        policy: OR('ClearinghouseMSP.member','ManufacturerMSP.member')